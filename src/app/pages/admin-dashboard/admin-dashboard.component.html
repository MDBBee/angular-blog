<div
  class="admin-dashboard min-h-screen bg-background text-white p-8 rounded-xl"
>
  <!-- Header with Gradient -->
  <div class="mb-8 relative z-10">
    <h1 class="text-4xl font-bold mb-2">Dashboard</h1>
    <p class="text-muted-foreground">
      Welcome back! Here's your comprehensive platform overview.
    </p>
    <div class="mt-4 flex gap-2 text-xs">
      <span class="px-3 py-1 rounded-full bg-green-500/20 text-green-400"
        >Last Updated: Just now</span
      >
      <span class="px-3 py-1 rounded-full bg-blue-500/20 text-blue-400"
        >System Status: Healthy</span
      >
    </div>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="flex items-center justify-center h-96">
      <div class="text-center">
        <div class="animate-spin mb-4">
          <svg class="w-12 h-12 mx-auto" fill="none" viewBox="0 0 24 24">
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
        </div>
        <p>Loading dashboard...</p>
      </div>
    </div>
  } @else if (error()) {
    <div class="bg-red-500/20 border border-red-500 rounded-lg p-6 mb-6">
      <p class="text-red-200">{{ error() }}</p>
    </div>
  } @else if (metrics()) {
    <!-- PRIMARY METRICS SECTION -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <app-stat-card
        [label]="'Total Users'"
        [value]="metrics()!.totalUsers"
        [icon]="'üë•'"
        [description]="'Active users on platform'"
        [showTrend]="true"
        [trend]="12"
      ></app-stat-card>
      <app-stat-card
        [label]="'Total Posts'"
        [value]="metrics()!.totalPosts"
        [icon]="'üìù'"
        [description]="'Published articles'"
        [showTrend]="true"
        [trend]="8"
      ></app-stat-card>
      <app-stat-card
        [label]="'Total Engagement'"
        [value]="metrics()!.totalComments"
        [icon]="'üí¨'"
        [description]="'Comments & interactions'"
        [showTrend]="true"
        [trend]="15"
      ></app-stat-card>
      <app-stat-card
        [label]="'Avg Engagement'"
        [value]="metrics()!.engagementRate"
        [icon]="'üìä'"
        [description]="'Comments per post'"
        [showTrend]="true"
        [trend]="5"
      ></app-stat-card>
    </div>

    <!-- SECONDARY METRICS ROW -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <app-stat-card
        [label]="'Active Users'"
        [value]="metrics()!.activeUsers"
        [icon]="'üü¢'"
        [description]="'Users active this month'"
      ></app-stat-card>
      <app-stat-card
        [label]="'Avg Posts/User'"
        [value]="metrics()!.avgPostsPerUser"
        [icon]="'üìà'"
        [description]="'Average per user'"
      ></app-stat-card>
      <app-stat-card
        [label]="'Growth Rate'"
        [value]="'24%'"
        [icon]="'üöÄ'"
        [description]="'Month over month'"
        [showTrend]="true"
        [trend]="18"
      ></app-stat-card>
    </div>

    <!-- VISUALIZATION SECTION 1 - Primary Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <!-- Topics Distribution Pie Chart -->
      @if (topicsPieChartData()) {
        <app-dashboard-card title="üìä Content Distribution by Topic">
          <div class="h-80">
            <app-pie-chart [chartData]="topicsPieChartData()"></app-pie-chart>
          </div>
        </app-dashboard-card>
      }

      <!-- Device Distribution Doughnut Chart -->
      @if (deviceDoughnutChartData()) {
        <app-dashboard-card title="üì± Platform Access Distribution">
          <div class="h-80">
            <app-doughnut-chart
              [chartData]="deviceDoughnutChartData()"
            ></app-doughnut-chart>
          </div>
        </app-dashboard-card>
      }
    </div>

    <!-- VISUALIZATION SECTION 2 - Trends -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <!-- Engagement Over Time -->
      @if (engagementLineChartData()) {
        <app-dashboard-card title="üìà Engagement Trend Analysis">
          <div class="h-80">
            <app-line-chart
              [chartData]="engagementLineChartData()"
            ></app-line-chart>
          </div>
        </app-dashboard-card>
      }

      <!-- Performance Radar Chart -->
      @if (performanceRadarChartData()) {
        <app-dashboard-card title="üéØ Performance Radar">
          <div class="h-80">
            <app-radar-chart
              [chartData]="performanceRadarChartData()"
            ></app-radar-chart>
          </div>
        </app-dashboard-card>
      }
    </div>

    <!-- VISUALIZATION SECTION 3 - Activity -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <!-- Posts by Date -->
      @if (postsBarChartData()) {
        <app-dashboard-card title="üìÖ Posts Activity Timeline">
          <div class="h-80">
            <app-bar-chart [chartData]="postsBarChartData()"></app-bar-chart>
          </div>
        </app-dashboard-card>
      }

      <!-- Top Users Activity -->
      @if (userActivityBarChartData()) {
        <app-dashboard-card title="‚≠ê Top Contributors">
          <div class="h-80">
            <app-bar-chart
              [chartData]="userActivityBarChartData()"
            ></app-bar-chart>
          </div>
        </app-dashboard-card>
      }
    </div>

    <!-- USERS OVERVIEW -->
    @if (filteredUserStats.length > 0) {
      <app-users-overview [users]="filteredUserStats"></app-users-overview>
    }

    <!-- SUPPORT CARDS SECTION -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 mb-8">
      <!-- Performance Metrics -->
      <app-dashboard-card title="‚ö° Performance Metrics">
        <div class="space-y-4">
          <div>
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">Page Load Time</span>
              <span class="text-sm font-bold text-blue-400">245ms</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2">
              <div
                class="bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full"
                style="width: 45%"
              ></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">Server Uptime</span>
              <span class="text-sm font-bold text-green-400">99.8%</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2">
              <div
                class="bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full"
                style="width: 99.8%"
              ></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">Cache Hit Ratio</span>
              <span class="text-sm font-bold text-purple-400">87%</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2">
              <div
                class="bg-gradient-to-r from-purple-500 to-purple-400 h-2 rounded-full"
                style="width: 87%"
              ></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">Database Query Time</span>
              <span class="text-sm font-bold text-orange-400">145ms</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2">
              <div
                class="bg-gradient-to-r from-orange-500 to-orange-400 h-2 rounded-full"
                style="width: 73%"
              ></div>
            </div>
          </div>
        </div>
      </app-dashboard-card>

      <!-- Quick Actions -->
      <app-dashboard-card title="‚öôÔ∏è Quick Actions">
        <div class="space-y-3">
          <button
            class="w-full px-4 py-3 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold transition-all duration-300 hover:shadow-lg"
          >
            üìä Generate Report
          </button>
          <button
            class="w-full px-4 py-3 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-semibold transition-all duration-300 hover:shadow-lg"
          >
            üîî Send Notifications
          </button>
          <button
            class="w-full px-4 py-3 rounded-lg bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white font-semibold transition-all duration-300 hover:shadow-lg"
          >
            ‚öôÔ∏è Settings
          </button>
          <button
            class="w-full px-4 py-3 rounded-lg bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 text-white font-semibold transition-all duration-300 hover:shadow-lg"
          >
            üì• Export Data
          </button>
        </div>
      </app-dashboard-card>
    </div>

    <!-- SYSTEM STATUS -->
    <app-dashboard-card title="üñ•Ô∏è System Status & Health Check">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div
          class="text-center p-4 rounded-lg bg-green-500/10 border border-green-500/20 hover:border-green-500/40 transition-all"
        >
          <div class="text-2xl font-bold text-green-400">‚úì</div>
          <p class="text-sm text-muted-foreground mt-2">API Server</p>
          <p class="text-xs text-green-400 mt-1">Online</p>
          <p class="text-xs text-green-400/60 mt-1">‚Üë 99.9%</p>
        </div>
        <div
          class="text-center p-4 rounded-lg bg-green-500/10 border border-green-500/20 hover:border-green-500/40 transition-all"
        >
          <div class="text-2xl font-bold text-green-400">‚úì</div>
          <p class="text-sm text-muted-foreground mt-2">Database</p>
          <p class="text-xs text-green-400 mt-1">Connected</p>
          <p class="text-xs text-green-400/60 mt-1">4.2GB / 10GB</p>
        </div>
        <div
          class="text-center p-4 rounded-lg bg-green-500/10 border border-green-500/20 hover:border-green-500/40 transition-all"
        >
          <div class="text-2xl font-bold text-green-400">‚úì</div>
          <p class="text-sm text-muted-foreground mt-2">Cache Server</p>
          <p class="text-xs text-green-400 mt-1">Running</p>
          <p class="text-xs text-green-400/60 mt-1">256MB used</p>
        </div>
        <div
          class="text-center p-4 rounded-lg bg-green-500/10 border border-green-500/20 hover:border-green-500/40 transition-all"
        >
          <div class="text-2xl font-bold text-green-400">‚úì</div>
          <p class="text-sm text-muted-foreground mt-2">Message Queue</p>
          <p class="text-xs text-green-400 mt-1">Operational</p>
          <p class="text-xs text-green-400/60 mt-1">245 pending</p>
        </div>
      </div>

      <!-- Additional Status Info -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="p-3 rounded-lg bg-blue-500/10 border border-blue-500/20">
          <p class="text-xs text-muted-foreground">Last Backup</p>
          <p class="text-sm font-semibold mt-1">2 hours ago</p>
        </div>
        <div
          class="p-3 rounded-lg bg-purple-500/10 border border-purple-500/20"
        >
          <p class="text-xs text-muted-foreground">Scheduled Maintenance</p>
          <p class="text-sm font-semibold mt-1">In 3 days</p>
        </div>
        <div
          class="p-3 rounded-lg bg-orange-500/10 border border-orange-500/20"
        >
          <p class="text-xs text-muted-foreground">SSL Certificate</p>
          <p class="text-sm font-semibold mt-1">Expires in 45 days</p>
        </div>
      </div>
    </app-dashboard-card>

    <!-- FOOTER STATS -->
    <div class="mt-8 text-center text-xs text-muted-foreground">
      <p>
        Dashboard auto-refreshes every 30 seconds ‚Ä¢ Last sync:
        <span class="text-blue-400">Just now</span>
      </p>
    </div>
  }
</div>
